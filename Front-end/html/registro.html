<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrarse</title>
    <link rel="icon" href="/Front-end/img/favicon.ico" type="image/png" sizes="32x32">
    
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>

    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="/Front-end/js/usuario.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        @import "tailwindcss";
    </style>
</head>
<body>
    <section class="bg-gray-50 dark:bg-gray-900">
        <div class="py-8 px-4 mx-auto max-w-screen-xl lg:py-16 grid lg:grid-cols-2 gap-8 lg:gap-16">
            <div class="flex flex-col justify-center">
                <a href="/Front-end/index.html"><img src="/Front-end/img/LCD-removebg 2.png" class="w-35" alt=""></a>
                <hr class="h-px my-8 bg-gray-300 border-0 dark:bg-gray-700">
                <h3 class="mb-4 text-4xl font-bold tracking-tight leading-none text-gray-900 md:text-2xl lg:text-5xl dark:text-white">Solicita tu registro.</h1>
                <p class="mb-6 text-lg font-normal text-gray-500 lg:text-xl dark:text-gray-400">Llene cada uno de los campos correspondientes para poder enviar su solicitud de registro en nuestro aplicativo, una vez aceptada, se le informará a través de correo electrónico.</p>
                </a>
                <ul class="flex space-x-2 sm:mt-0 flex items-center">
                    <li>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="#39A800" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12l4-4m-4 4 4 4"/>
                        </svg>
                    </li>
                    <li>
                        <a href="/Front-end/index.html" class="text-[#39A800] dark:text-green-500 hover:underline font-medium text-lg inline-flex items-center">Volver</a>
                    </li>
                </ul>
            </div>
            <div>
                <div class="w-full lg:max-w-xl p-6 space-y-8 sm:p-8 bg-white rounded-lg shadow-xl dark:bg-gray-800">
                    <form id="registroForm" onsubmit="registrarUsuario();" class="mt-3 space-y-5" action="#">
                        <div>
                            <input type="text" id="id_usuario" class="hidden">
                            <label for="" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nombre completo <span style="color: red;">*</span></label>
                            <input type="text" id="nombre_usuarioR" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="John" required oninput="validateFullName()"/>
                            <div id="fullname-requirements" class="text-sm mt-2">
                                <p id="validation-fullname" class="text-red-500">Este es un campo obligatorio.</p>
                            </div>
                        </div>
                        <div class="grid gap-4 mb-4 sm:grid-cols-2">
                            <div>
                                <label for="" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Número de documento <span style="color: red;">*</span></label>
                                <input type="number" id="documento_usuarioR" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="12345678" pattern="[0-9]{3}-[0-9]{2}-[0-9]{3}" required oninput="validateDocument()"/>
                                <div id="fullname-requirements" class="text-sm mt-2">
                                    <p id="validation-document" class="text-red-500">Este es un campo obligatorio.</p>
                                </div>
                            </div>
                            <div>
                                <label for="" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Correo <span style="color: red;">*</span></label>
                                <input type="email" id="usernameR" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="john.doe@sena.edu.co" required oninput="validateUsername()"/>
                                <div id="username-requirements" class="text-sm mt-2">
                                    <p id="validation-username" class="text-red-500">Este es un campo obligatorio.</p>
                                </div>
                            </div>
                            <div>
                                <label for="" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Centro <span style="color: red;">*</span></label>
                                <select id="centroR" onchange="validateCentro()" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                    <option selected="">Seleccione un centro</option>
                                    <option value="cies">Centro de la Industria, la Empresa y los Servivios. </option>
                                    <option value="direccion">Huila Dirección Regional</option>
                                </select>
                                <div id="validation-centro" class="text-sm mt-2 text-red-500">Por favor, seleccione un centro.</div>
                            </div>
                            <div>
                                <label for="" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Cargo <span style="color: red;">*</span></label>
                                <select id="cargoR" onchange="validateCargo()" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                    <option selected="">Seleccione un cargo</option>
                                    <option value="contratista">Contratista</option>
                                    <option value="funcionario">Funcionario/a</option>
                                </select>
                                <div id="validation-cargo" class="text-sm mt-2 text-red-500">Por favor, seleccione un cargo.</div>
                            </div>
                            <div>
                                <label for="" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Contraseña <span style="color: red;">*</span></label>
                                <div class="relative">
                                    <input type="password" id="passwordR" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="•••••••••" required oninput="validatePassword()"/>
                                    <div id="password-requirements" class="text-sm mt-2">
                                        <p id="validation-message" class="text-red-500">La contraseña debe tener al menos una letra mayúscula, un número, un carácter especial y 8 caracteres.</p>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Confirmación contraseña <span style="color: red;">*</span></label>
                                <div class="relative">
                                    <input type="password" id="confirm_contrasenaR" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="•••••••••" required oninput="validateConfirmPassword()"/>
                                    <div id="confirmpassword-requirements" class="text-sm mt-2">
                                        <p id="validation-confirmmessage" class="text-red-500">Las contraseña no coinciden.</p>
                                    </div>
                                </div>        
                            </div>
                        </div>
                        <div>
                        <div class="hidden">
                            <label for="" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">rol <span style="color: red;">*</span></label>
                            <select id="roleR" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                <option selected="">Seleccione un cargo</option>
                                <option value="usuario" selected>Usuario</option>
                                <option value="administrador">Admin</option>
                            </select>
                        </div>
                        <div class="hidden">
                            <label for="" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Estado <span style="color: red;">*</span></label>
                            <select id="estado_usuarioR" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500">
                                <option selected="">Seleccione un cargo</option>
                                <option value="activo" selected>Activo</option>
                                <option value="inactivo">Inactivo</option>
                            </select>
                        </div>
                        <button type="button" class="text-white bg-[#39A800] hover:bg-[#39A800]/90 focus:ring-4 focus:outline-none focus:ring-[#39A700]/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-[#3b5998]/55 me-2 mb-2" onclick="registrarUsuario();">
                            Solicitar
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <script>
        function validatePassword() {
        let password = document.getElementById('passwordR').value;
        let validationMessage = document.getElementById('validation-message');

        // Validaciones
        let message = '';

        if (password.length < 8) {
            message = 'La contraseña debe tener al menos 8 caracteres.';
        } else if (!/[A-Z]/.test(password)) {
            message = 'La contraseña debe tener al menos una letra mayúscula.';
        } else if (!/\d/.test(password)) {
            message = 'La contraseña debe contener al menos un número.';
        } else if (!/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
            message = 'La contraseña debe contener al menos un carácter especial.';
        } else {
            message = 'La contraseña es válida.';
            validationMessage.classList.remove('text-red-500');
            validationMessage.classList.add('text-green-500');
        }

        // Si la contraseña cumple con todos los requisitos
        if (message === 'La contraseña es válida.') {
            validationMessage.classList.remove('text-red-500');
            validationMessage.classList.add('text-green-600');
        } else {
            validationMessage.classList.remove('text-green-600');
            validationMessage.classList.add('text-red-500');
        }

        validationMessage.textContent = message;
    }

    function validateConfirmPassword() {
    let password = document.getElementById('passwordR').value; // Obtener la contraseña
    let confirm_contrasena = document.getElementById('confirm_contrasenaR').value; // Obtener la confirmación
    let validationMessageConfirm = document.getElementById('validation-confirmmessage');

    let messageConfirm = '';

    // Comparar las contraseñas
    if (password !== confirm_contrasena) {
        messageConfirm = 'Las contraseñas no coinciden.';
        validationMessageConfirm.classList.remove('text-green-600');
        validationMessageConfirm.classList.add('text-red-500');
    } else {
        messageConfirm = '';
        validationMessageConfirm.classList.remove('text-red-500');
        validationMessageConfirm.classList.add('text-green-600');
    }

    validationMessageConfirm.textContent = messageConfirm;
    }

    function validateFullName() {
        let nombre_usuario = document.getElementById("nombre_usuarioR").value.trim(); // Obtener el valor del nombre y eliminar espacios en blanco
        let validationMessageFullname = document.getElementById("validation-fullname");

        let messageFullname = '';

        if(nombre_usuario.length === 0){
            messageFullname = 'El nombre completo no puede estar vacío.';
            validationMessageFullname.classList.remove('text-green-600');
            validationMessageFullname.classList.add('text-red-500');
        } else if (!/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$/.test(nombre_usuario)) {
            messageFullname = 'El nombre completo solo puede contener letras y espacios.';
            validationMessageFullname.classList.remove('text-green-600');
            validationMessageFullname.classList.add('text-red-500');
        } else if (nombre_usuario.split(' ').length < 2) {
            messageFullname = 'Por favor, ingrese al menos un nombre y un apellido.';
            validationMessageFullname.classList.remove('text-green-600');
            validationMessageFullname.classList.add('text-red-500');
        } else {
            messageFullname = '';
            validationMessageFullname.classList.remove('text-red-500');
            validationMessageFullname.classList.add('text-green-600');
        }

        validationMessageFullname.textContent = messageFullname;
    }

    function validateDocument() {
        let documento_usuario = document.getElementById("documento_usuarioR").value;
        let validationDocument = document.getElementById("validation-document");

        let messageDoc = '';

        if(documento_usuario.length < 8){
            messageDoc = 'El número de documento no es válido.';
            validationDocument.classList.remove('text-green-600');
            validationDocument.classList.add("text-red-500");
        }else if (!/[0-9]/.test(documento_usuario)){
            messageDoc = 'El número de documento debe contener solo números.';
            validationDocument.classList.remove('text-green-600');
            validationDocument.classList.add("text-red-500");
        }else{
            messageDoc = '';
            validationDocument.classList.remove("text-red-500");
            validationDocument.classList.add('text-green-600');
        }

        validationDocument.textContent = messageDoc;
    }

    function validateUsername() {
    let correo = document.getElementById("usernameR").value.trim(); // Obtener el valor del correo y eliminar espacios en blanco
    let validationUsername = document.getElementById("validation-username");

    let messageUsername = '';

    // Expresión regular para validar el formato del correo y el dominio específico
    const emailPattern = /^[a-zA-Z0-9._%+-]+@sena\.edu\.co$/;

    // Validaciones
    if (correo.length === 0) {
        messageUsername = 'El correo es un campo obligatorio';
        validationUsername.classList.remove('text-green-600');
        validationUsername.classList.add('text-red-500');
    } else if (!emailPattern.test(correo)) {
        messageUsername = 'El correo a ingresar debe ser institucional.';
        validationUsername.classList.remove('text-green-600');
        validationUsername.classList.add('text-red-500');
    } else {
        messageUsername = '';
        validationUsername.classList.remove('text-red-500');
        validationUsername.classList.add('text-green-600');
    }

    validationUsername.textContent = messageUsername;
    }

    function validateCentro() {
    let centro = document.getElementById("centroR").value; // Obtener el valor seleccionado
    let validationCentro = document.getElementById("validation-centro");

    let messageCentro = '';

    // Validaciones
    if (centro === "") {
        messageCentro = 'Por favor, seleccione un centro.';
        validationCentro.classList.remove('text-green-600');
        validationCentro.classList.add('text-red-500');
    } else if (centro !== "cies" && centro !== "direccion") {
        messageCentro = 'Por favor, seleccione un centro.';
        validationCentro.classList.remove('text-green-600');
        validationCentro.classList.add('text-red-500');
    } else {
        messageCentro = '';
        validationCentro.classList.remove('text-red-500');
        validationCentro.classList.add('text-green-600');
    }

    validationCentro.textContent = messageCentro;
    }

    function validateCargo() {
    let cargo = document.getElementById("cargoR").value; // Obtener el valor seleccionado
    let validationCargo = document.getElementById("validation-cargo");

    let messageCargo = '';

    // Validaciones
    if (cargo === "") {
        messageCargo = 'Por favor, seleccione un cargo.';
        validationCargo.classList.remove('text-green-600');
        validationCargo.classList.add('text-red-500');
    } else if (cargo !== "contratista" && cargo !== "funcionario") {
        messageCargo = 'Por favor, seleccione un cargo.';
        validationCargo.classList.remove('text-green-600');
        validationCargo.classList.add('text-red-500');
    } else {
        messageCargo = '';
        validationCargo.classList.remove('text-red-500');
        validationCargo.classList.add('text-green-600');
    }

    validationCargo.textContent = messageCargo;
    }
    </script>

    <script src="/Front-end/js/config.js"></script>
    <script src="/Front-end/js/usuario.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</body>
</html>