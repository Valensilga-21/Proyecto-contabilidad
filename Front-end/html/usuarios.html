<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/Front-end/css/bootstrap.css">
    <link rel="stylesheet" href="/Front-end/css/index.css">

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="/Front-end/js/bootstrap.js"></script>

    <!-- SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!--Box Icons-->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>

    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">

    <script src="/Front-end/js/cerrarSesion.js"></script>

    <title>Usuarios</title>
</head>
<style>
    .button:hover {
        background-color: rgb(187, 187, 187);
        border-radius: 15px;
    }

    .button span {
        margin-right: 3px;
        margin-top: 3px;
    }

    .btns {
        border-radius: 12px;
    }
    
</style>
<body onload="listarUsuarios();">
    <nav>
        <div class="logo-name">
            <div class="row">
                <div id="imglogo" class="container">
                    <img src="/Front-end/img/LCD-removebg 1.png" alt="" style="width: 200px;">
                </div>
            </div>
        </div>

        <div class="menu-items">
            <ul class="nav-links">
                <li><a href="/Front-end/html/inicio.html">
                        <i class="uil uil-estate"></i>
                        <span class="link-name"><b>Inicio</b></span>
                    </a></li>
                <li class="active"><a href="/Front-end/html/usuarios.html">
                        <i class='bx bx-group'></i>
                        <span class="link-name"><b>Usuarios</b></span>
                    </a></li>
                <li><a href="/Front-end/html/legalizaciones.html">
                        <i class="uil uil-chart"></i>
                        <span class="link-name"><b>Legalizaciones</b></span>
                    </a></li>
                <li><a href="/Front-end/html/viajes.html">
                        <i class='bx bx-car'></i>
                        <span class="link-name"><b>Viajes</b></span>
                    </a></li>
                <li><a href="/Front-end/html/perfil.html">
                        <i class='bx bx-cog'></i>
                        <span class="link-name"><b>Perfil</b></span>
                    </a></li>
                <li><a href="/Front-end/html/ayuda.html">
                        <i class='bx bx-help-circle'></i>
                        <span class="link-name"><b>Ayuda</b></span>
                    </a></li>
                <li style="padding-top: 45%;">
                    <a type="button" onclick="cerrarSesion();">
                        <i class="uil uil-signout" style="color: #00BB00;"></i>
                        <span class="link-name"><b>Cerrar sesión</b></span>
                    </a>
                    </li>
            </ul>
        </div>
    </nav>

    <section class="dashboard">
        <div class="row justify-content-center align-items-center g-2" style="padding-top: 4%;">
            <div class="col-md-2 col-sm-4 col-7">
                <div class="d-grid input-group">
                    <button id="btnDescargar" type="button" class="btns w-100 px-2 py-2" >
                        <box-icon name='to-top' type='solid' rotate='180' size="18px"></box-icon>
                        <b>Descargar PDF</b>
                    </button>
                </div>
            </div>
            <div class="col-md-3 col-sm-6 col-12">
                <div class="input-group">
                    <button type="button" class="btn btn-outline-secondary" onclick="listarUsuarios();">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-search" viewBox="0 0 16 16">
                            <path
                                d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
                        </svg>
                    </button>
                    <input type="text" id="texto" class="form-control" placeholder="Buscar...">
                </div>
            </div>
            <div class="col-md-2 col-sm-4 col-6">
                <div class="input-group">
                    <span class="input-group-text"><box-icon name='filter'></box-icon></span>
                    <select id="centroFilter" class="form-select">
                        <option value="">Centros</option>
                        <option value="cies">CIES</option>
                        <option value="direccion">Dirección</option>
                    </select>
                </div>
            </div>
            <div class="col-md-2 col-sm-4 col-6">
                <div class="input-group">
                    <span class="input-group-text"><box-icon name='filter'></box-icon></span>
                    <select id="roleFilter" class="form-select">
                        <option value="">Roles</option>
                        <option value="usuario">Usuario</option>
                        <option value="administrador">Administrador</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-2">
                <div class="input-group">
                    <span class="input-group-text"><box-icon name='filter'></box-icon></span>
                    <select id="estadoFilter" class="form-select">
                        <option value="">Estados</option>
                        <option value="activo">Activos</option>
                        <option value="pendiente">Pendientes</option>
                        <option value="deshabilitado">Deshabilitado</option>
                    </select>
                </div>
            </div>
            <div class="col-12 col-sm-2 col-md-1">
                <button class="btn w-100" style="background-color: #00BB00;" data-bs-toggle="modal"
                    data-bs-target="#myModal">
                    <i class="bi bi-plus-lg text-white"></i>
                </button>
            </div>
        </div>


        <div class="activity-data table-responsive" style="padding-top: 3%;">
            <table class="table table-hover" id="userTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Documento</th>
                        <th>Nombre</th>
                        <th>Correo</th>
                        <th>Centro</th>
                        <th>Cargo</th>
                        <th>Rol</th>
                        <th>Estado</th>
                        <th style="text-align: center; justify-content: center;">Acciones</th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
    </section>

    <!-- Modal Registro-->
    <div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="padding: 10%; border-radius: 15px;">
                <h3 style="font-weight: 600;">Registrar Usuario</h3>
                <div class="modal-body">
                    <div class="row" id="signup" id="registroForm" onsubmit="registrarUsuario();">
                        <div class="mb-3 col col-xl-6 col-12 justify-content-between">
                            <label for="usuario" class="form-label visually-hidden">Usuario</label>
                            <div class="input-group">
                                <span class="input-group-text"><box-icon name='user' color="#39A800"></box-icon></span>
                                <input type="text" class="form-control" id="nombre_usuarioA"
                                    placeholder="Nombre Completo">
                            </div>
                            <div class="error-message" id="usuarioError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="" class="form-label visually-hidden">Cargo</label>
                            <div class="input-group">
                                <span class="input-group-text"><box-icon name='briefcase'
                                        color="#39A800"></box-icon></box-icon></box-icon></span>
                                <select name="cargo" id="cargoA" class="form-select"
                                    style="background-color: #EFF3F6; border-radius: 0px 0px 10px 0px; border-left:none;">
                                    <option value="" disabled selected>Cargo</option>
                                    <option value="funcionario">Funcionario</option>
                                    <option value="contratista">Contratista</option>
                                </select>
                            </div>
                            <div class="error-message" id="cargoError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="" class="form-label visually-hidden">Documento</label>
                            <div class="input-group">
                                <span class="input-group-text"><box-icon name='id-card'
                                        color="#39A800"></box-icon></span>
                                <input type="number" class="form-control" id="documento_usuarioA" placeholder="Documento">
                            </div>
                            <div class="error-message" id="documentoError" style="color: red; display:none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="contraseña" class="form-label visually-hidden">Contraseña</label>
                            <div class="input-group">
                                <span class="input-group-text"><box-icon name='lock-alt'
                                        color="#39A800"></box-icon></span>
                                <input type="password" class="form-control" id="passwordA" placeholder="Contraseña"
                                    onpaste="return false" oncopy="return false" oncut="return false">
                            </div>
                            <div class="error-message" id="contraseñaError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="contraseña" class="form-label visually-hidden">Correo</label>
                            <div class="input-group">
                                <span class="input-group-text"><box-icon name='envelope'
                                        color="#39A800"></box-icon></span>
                                <input type="email" class="form-control" id="usernameA" placeholder="Correo">
                            </div>
                            <div class="error-message" id="correoError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="contraseña" class="form-label visually-hidden">Confirmación contraseña</label>
                            <div class="input-group">
                                <span class="input-group-text"><box-icon name='lock-alt'
                                        color="#39A800"></box-icon></span>
                                <input type="password" class="form-control" id="confirm_contrasenaA"
                                    placeholder="Confirmación contraseña" onpaste="return false" oncopy="return false"
                                    oncut="return false">
                            </div>
                            <div class="error-message" id="confirmContraError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="" class="form-label visually-hidden">Centro</label>
                            <div class="input-group" style="border-radius: 10px 10px 10px 10px; border-left:none;">
                                <span class="input-group-text"><box-icon name='buildings'
                                        color="#39A800"></box-icon></span>
                                <select name="centro" id="centroA" class="form-select"
                                    style="background-color: #EFF3F6; border-radius: 0px 0px 10px 0px; border-left:none;">
                                    <option value="" disabled selected>Centro</option>
                                    <option value="cies">CIES</option>
                                    <option value="direccion">Dirección</option>
                                </select>
                            </div>
                            <div class="error-message" id="centroError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="rol" class="form-label visually-hidden">Rol</label>
                            <div class="input-group" style="border-radius: 10px 10px 10px 10px; border-left:none;">
                                <span class="input-group-text"><box-icon name='user-circle'
                                        color="#39A800"></box-icon></span>
                                <select name="centro" id="roleA" class="form-select"
                                    style="background-color: #EFF3F6; border-radius: 0px 0px 10px 0px; border-left:none;">
                                    <option value="">Rol</option>
                                    <option value="usuario">Usuario</option>
                                    <option value="administrador">Administrador</option>
                                </select>
                            </div>
                            <div class="error-message" id="centroError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12 visually-hidden">
                            <label for="rol" class="form-label visually-hidden">Rol</label>
                            <div class="input-group" style="border-radius: 10px 10px 10px 10px; border-left:none;">
                                <span class="input-group-text"><box-icon name='user-circle'
                                        color="#39A800"></box-icon></span>
                                <select name="centro" id="estado_usuarioA" class="form-select"
                                    style="background-color: #EFF3F6; border-radius: 0px 0px 10px 0px; border-left:none;">
                                    <option value="">Estado</option>
                                    <option value="activo" selected>Activo</option>
                                    <option value="pendiente">Pendiente</option>
                                    <option value="deshabilitado">Deshabilitado</option>
                                </select>
                            </div>
                            <div class="error-message" id="centroError" style="color: red; display: none;"></div>
                        </div>
                    </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" id="limpiar" class="btn btn-secondary">Limpiar</button>
                    <button type="submit" class="btn" style="background-color: #00BB00; color: white; font-weight: 600;" onclick="registrarUser();">Registrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Editar usuario-->
    <div class="modal fade" id="editUser" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="padding: 10%; border-radius: 15px;">
                <h3 style="font-weight: 600;">Editar Usuario</h3>
                <div class="modal-body">
                    <div class="row" id="signup">
                        <div class="mb-3 col col-xl-6 col-12 justify-content-between">
                            <label for="usuario" class="form-label visually-hidden">Usuario</label>
                            <div class="input-group">
                                <input type="text" class="visually-hidden" id="userId">
                                <span class="input-group-text"><box-icon name='user' color="#00BB00"></box-icon></span>
                                <input type="text" class="form-control" id="nombreUsuario"
                                    placeholder="Nombre Completo">
                            </div>
                            <div class="error-message" id="usuarioError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="" class="form-label visually-hidden">Cargo</label>
                            <div class="input-group">
                                <span class="input-group-text"><box-icon name='briefcase'
                                        color="#00BB00"></box-icon></box-icon></box-icon></span>
                                <select name="cargo" id="cargoU" class="form-select"
                                    style="background-color: #EFF3F6; border-radius: 0px 0px 10px 0px; border-left:none;">
                                    <option value="" disabled selected>Cargo</option>
                                    <option value="funcionario">Funcionario</option>
                                    <option value="contratista">Contratista</option>
                                </select>
                            </div>
                            <div class="error-message" id="cargoError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="contraseña" class="form-label visually-hidden">Documento</label>
                            <div class="input-group">
                                <span class="input-group-text"><box-icon name='id-card'
                                        color="#00BB00"></box-icon></span>
                                <input type="number" class="form-control" id="userDocument" placeholder="Documento">
                            </div>
                            <div class="error-message" id="documentoError" style="color: red; display:none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12 visually-hidden">
                            <label for="contraseña" class="form-label visually-hidden">Contraseña</label>
                            <div class="input-group">
                                <span class="input-group-text"><box-icon name='lock-alt'
                                        color="#00BB00"></box-icon></span>
                                <input type="password" class="form-control" id="contrasenaU" placeholder="Contraseña"
                                    onpaste="return false" oncopy="return false" oncut="return false" disabled selected>
                            </div>
                            <div class="error-message" id="contraseñaError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="contraseña" class="form-label visually-hidden">Correo</label>
                            <div class="input-group">
                                <span class="input-group-text"><box-icon name='envelope'
                                        color="#00BB00"></box-icon></span>
                                <input type="email" class="form-control" id="username" placeholder="Correo">
                            </div>
                            <div class="error-message" id="correoError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12 visually-hidden">
                            <label for="contraseña" class="form-label visually-hidden">Confirmación contraseña</label>
                            <div class="input-group">
                                <span class="input-group-text"><box-icon name='lock-alt'
                                        color="#00BB00"></box-icon></span>
                                <input type="password" class="form-control" id="confirm_contraU"
                                    placeholder="Confirmación contraseña" onpaste="return false" oncopy="return false"
                                    oncut="return false" disabled selected>
                            </div>
                            <div class="error-message" id="confirmContraError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="" class="form-label visually-hidden">Centro</label>
                            <div class="input-group" style="border-radius: 10px 10px 10px 10px; border-left:none;">
                                <span class="input-group-text"><box-icon name='buildings'
                                        color="#39A800"></box-icon></span>
                                <select name="centro" id="centroU" class="form-select"
                                    style="background-color: #EFF3F6; border-radius: 0px 0px 10px 0px; border-left:none;">
                                    <option value="" disabled selected>Centro</option>
                                    <option value="cies">CIES</option>
                                    <option value="direccion">Dirección</option>
                                </select>
                            </div>
                            <div class="error-message" id="centroError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="" class="form-label visually-hidden">Rol</label>
                            <div class="input-group" style="border-radius: 10px 10px 10px 10px; border-left:none;">
                                <span class="input-group-text"><box-icon name='user-circle'
                                        color="#00BB00"></box-icon></span>
                                <select name="centro" id="roleU" class="form-select"
                                    style="background-color: #EFF3F6; border-radius: 0px 0px 10px 0px; border-left:none;">
                                    <option value="" disabled selected>Rol</option>
                                    <option value="usuario">Usuario</option>
                                    <option value="administrador">Administrador</option>
                                </select>
                            </div>
                            <div class="error-message" id="centroError" style="color: red; display: none;"></div>
                        </div>
                        <div class="mb-4 col col-xl-6 col-12">
                            <label for="" class="form-label visually-hidden">Rol</label>
                            <div class="input-group" style="border-radius: 10px 10px 10px 10px; border-left:none;">
                                <span class="input-group-text"><box-icon name='user-circle'
                                        color="#00BB00"></box-icon></span>
                                <select id="estado_usuarioU" class="form-select"
                                    style="background-color: #EFF3F6; border-radius: 0px 0px 10px 0px; border-left:none;">
                                    <option value="" disabled selected>Estado Usuario</option>
                                    <option value="activo">Activo</option>
                                    <option value="pendiente">Pendiente</option>
                                    <option value="deshabilitado">Deshabilitado</option>
                                </select>
                            </div>
                            <div class="error-message" id="centroError" style="color: red; display: none;"></div>
                        </div>
                    </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="submit" id="limpiarEditar" class="btn btn-secondary">Limpiar</button>
                    <button type="submit" id="editarUsuario" class="btn"
                        style="background-color: #00BB00; color: white; font-weight: 600;"
                        onclick="guardarCambios();">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <script src="/Front-end/js/config.js"></script>
    <script src="/Front-end/js/usuario.js"></script>
</body>
</html>